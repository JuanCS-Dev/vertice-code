apiVersion: v1
kind: ConfigMap
metadata:
  name: spin-config
  namespace: vertice-system
data:
  spin.toml: |
    spin_manifest_version = 2

    [application]
    name = "vertice-agent-executor"
    version = "1.0.0"
    authors = ["Vertice AI <team@vertice.ai>"]
    description = "Secure WebAssembly execution environment for Vertice AI agents"

    [[trigger.http]]
    route = "/execute"
    executor = "wagi"

    [component.python-agent]
    source = "agent.wasm"
    description = "Python agent execution component"
    allowed_outbound_hosts = ["https://api.openai.com", "https://googleapis.com", "https://api.anthropic.com"]
    files = [{ source = "Lib", destination = "/Lib" }]

    [component.python-agent.build]
    command = "componentize-py -w spin-http component app.py -o agent.wasm"